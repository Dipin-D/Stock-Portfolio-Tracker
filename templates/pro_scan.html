{% extends 'base.html' %}

{% block head %}
<style>
    .content {
        padding-top: 30px;
        width: 100%;
        height: 100%;
        position: fixed;
        background-color: #e5e5e5;
    }
    .main-content-container {
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: row;
        background-color: #f9f9f9;
        overflow: hidden;
    }

    .left-main-content {
        width: 20%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 50px 0px 0px 0px;
        background-color: #e5e5e5;
        border-right: 1px solid black;
        overflow-y: auto;
    }

    .option-panel-container {
        /* Centering items */
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 158.43px;
        background-color: #e5e5e5;
    }
    .options-panel {
        height: auto;
        width: 158.43px;
        padding-bottom: 64px;
        
    }
    .options-heading {
        font-weight: bold;
        margin-top: 10px;
        font-size: 14px;
        text-align: center;
    }
    .options-list {
        width: 158.43px;
        border-collapse: collapse;
        background-color: rgb(255, 255, 255);
    }
    
    /* Style for table cells */
    .options-list td {
        border: 1px solid #ddd; 
        text-align: center;  
        
    }

    .center-main-content {
        width: 60%;
        height: calc(100vh - 100px);
        padding: 20px;
        overflow-y: auto;
        background-color: #ffffff;
        box-sizing: border-box;
        border: 1px solid #ddd;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        border: 1px solid #DDDDDD;
    }

    .data-table th, .data-table td {
        padding: 10px;
        text-align: center;
    }

    .data-table th {
        background-color: #2E3B4E;
        font-weight: bold;
        color: white;
    }

    .data-table tr:nth-child(even) {
        background-color: #e6eef8;
    }
    .data-table tr:nth-child(odd) {
        background-color: #ffffff;
    }

    .right-main-content {
        width: 20%;
        height: 100vh;
        padding: 50px 0px 20px 0px;
        background-color: #e5e5e5;
        border-left: 1px solid black;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .clickable {
        display: block;
        width: 100%;
        text-align: center;
        background-color: transparent;
        cursor: pointer;
        padding: 10px;
        border: none;
        font-size: 14px;
    }
    .clickable:hover {
        background-color: skyblue;
        color: white;
    }
    .active {
        background-color: #187ed9;
        color: white;
    }
</style>
{% endblock %}

{% block title %}Pro scan | Trading Pro{% endblock %}

{% block content %}
<main class="content">    
    <div class="main-content-container">  
        <div class="left-main-content">
            <div class="option-panel-container" id="option-panel-container"> 
                <div class="options-panel">
                    <div class="options-heading">Ticker Group</div>  
                    <table class="options-list" id="ticker-group">
                        <tr>
                            <td><button type="button" class="clickable" onclick="redirectTo('{% url 'stock_list' 'Dow-Jones-30' %}')">Dow 30</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" onclick="redirectTo('{% url 'stock_list' 'Nasdaq-100' %}')">Nasdaq</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" onclick="redirectTo('{% url 'stock_list' 'S&P-500' %}')">S & P 500</button></td>
                        </tr>
                    </table>
                </div>
                <div class="options-panel">
                    <div class="options-heading">Strategy</div>  
                    <table class="options-list">
                        <tr>
                            <td><button type="button" class="clickable" data-option="strategy">Golden Cross</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="strategy">Fibonacci Retracement</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="strategy">Supply and Demand</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="strategy">*Technical*</button></td>
                        </tr>
                    </table>
                </div>
                <div class="options-panel">
                    <div class="options-heading">Position</div>  
                    <table class="options-list">
                        <tr>
                            <td><button type="button" class="clickable" data-option="Long">Long</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Short">Short</button></td>
                        </tr>
                    </table>
                </div>
                <div class="options-panel">
                    <div class="options-heading">Earnings Handling</div>  
                    <table class="options-list">
                        <tr>
                            <td><button type="button" class="clickable" data-option="Nothing Special">Nothing Special</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Never Trade Earnings">Never Trade Earnings</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Only Trade Earnings">Only Trade Earnings</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Custom Earnings">Custom Earnings</button></td>
                        </tr>
                    </table>
                </div>
                <div class="options-panel">
                    <div class="options-heading">Open Trade When</div>  
                    <table class="options-list">
                        <tr>
                            <td><button type="button" class="clickable" data-option="*Technical Open*">*Technical Open*</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Bull Squeeze">Bull Squeeze</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Bear Squeeze">Bear Squeeze</button></td>
                        </tr>
                        <tr>
                            <td><button type="button" class="clickable" data-option="Pullback">Pullback</button></td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
        <div class="center-main-content">
            <h2></h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Ticker</th>
                        <th># Wins</th>
                        <th># Losses</th>
                        <th>Win Rate</th>
                        <th>Avg Trade Return</th>
                        <th>Total Backtest Return</th>
                        <th>Backtest Length</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stock in stocks %}
                        <tr>
                            <td>{{ stock.name }}</td>
                            <td>{{ stock.symbol }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="right-main-content"> </div>
    </div>
</main>

<script>
        const showButton = document.getElementById("strategy-button");
        const showOptionPanel = document.getElementById("option-panel-container");
        
        document.querySelectorAll('.options-panel .clickable').forEach(function(button) {
            button.addEventListener('click', function() {
                const panel = this.closest('.options-panel');
                
                const isTickerGroup = panel.querySelector('.options-heading').textContent.includes('Ticker Group');
                const isEarningsHandling = panel.querySelector('.options-heading').textContent.includes('Earnings Handling');
                const isOpenTradeWhen = panel.querySelector('.options-heading').textContent.includes('Open Trade When');
                const isPosition = panel.querySelector('.options-heading').textContent.includes('Position');

                if (isTickerGroup || isEarningsHandling || isOpenTradeWhen || isPosition) {
                    panel.querySelectorAll('.clickable').forEach(btn => btn.classList.remove('active'));
                }
                
                this.classList.toggle('active');
            });
        });
    
        function redirectTo(url) {
            window.location.href = url;
        }

</script>
{% endblock %}